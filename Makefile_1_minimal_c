# Makefile
# 1. Prerequisites on header files generated
# 2. Compile source files in current directory only (excluding subdirs)
# 3. Minimal Makefile
#
# .
# ├── f1.c
# ├── f1.h
# ├── f2.c
# ├── f2.h
# ├── main.c
# ├── Makefile
# └── print_log.h
#

OUT      = main  # should match basename of one source file
CFLAGS   = -std=c11 -Wall -W -pedantic -g # -O3
CPPFLAGS = -MMD -MP -DNDEBUG -I../hello
LDFLAGS  = #-L../hello
LDLIBS   = #-lpthread -lhello

# build shared library
#OUT       = ../lib/libhello.so
#CFLAGS   += -fPIC
#LDFLAGS  += -shared

$(OUT) : $(patsubst %.c,%.o,$(wildcard *.c))

-include *.d

clean :
	rm -fr $(OUT) *.o *.d

.PHONY : clean
